package comm

import (
	"log"
	"testing"
)

func TestParsePart(t *testing.T) {
	data, _ := BinaryHelper.GetBCDString("5b000000480000000e100100bc614e010001000000000000bc614e34323334353637383132372e302e302e3100000000000000000000000000000000000000000000004671cc385d5b000000480000000e100100bc614e010001000000000000bc614e35323334353637383132372e302e302e3100000000000000000000000000000000000000000000004671cc385d5b000000480000000e100100bc614e010001000000000000bc614e36323334353637383132372e302e302e3100000000000000000000000000000000000000000000004671cc385d5b000000480000000e100100bc614e010001000000000000bc614e37323334353637383132372e302e302e3100000000000000000000000000000000000000000000004671cc385d")
	pack, left, err := ParseHelper.ParsePart(data, 0x5b, 0x5d)
	if err != nil {
		log.Println(err)
	}
	if len(pack) > 0 {
		for i, v := range pack {
			log.Println(i, BinaryHelper.ToBCDString(v, int32(0), int32(len(v))))
		}
	}
	log.Println("package size:", len(pack), " left", len(left))
}

func TestParsePart2(t *testing.T) {
	data, _ := BinaryHelper.GetBCDString("5b0000005a0200003cea120000bc614e0100010000000000d3e5423837353939000000000000000000000000000212020000002400080807e2112f0f06810ecf0191782b002300000000020400a100000000000300000000af935d5b12")
	pack, left, err := ParseHelper.ParsePart(data, 0x5b, 0x5d)
	if err != nil {
		log.Println(err)
	}
	if len(pack) > 0 {
		for i, v := range pack {
			log.Println(i, BinaryHelper.ToBCDString(v, int32(0), int32(len(v))))
		}
	}
	log.Println("package size:", len(pack), " left", len(left))
}
